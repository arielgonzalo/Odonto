<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>DentalCo</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/full-width-pics.css" rel="stylesheet">

  </head>

  <body>

    <!-- Barra superior -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="main.html">DentalCo</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link">Inicio
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="lobby_paciente.html">Pacientes
              
            </a>
            </li>            
            <li class="nav-item">
              <a class="nav-link" href="index.html">Cerrar sesión</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Imagen superior -->

    <header class="py-5 bg-image-full" style="background-image: url('./img/top.jpg');">      

    </header>

    <!-- Cuerpo principal -->
    <section class="py-5">
      <div class="container">


        <!-- Modal -->
        <div id="dataInsert" class="modal fade" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                
                <h5 id="modalTitle" class="modal-title">Estado de la pieza dental</h5>
              </div>
              <div class="modal-body">
                

                 <form class="form-horizontal" method="post">
                    <fieldset>
                        
                        <legend class="text header">Tratamiento recomendado:</legend>

                        <div class="form-group">
                            <div class="col-md-8">
                                <textarea id="TXttratamiento" name="tratamiento" class="form-control"></textarea>
                              </br>

                              <label>Próxima cita: <input type="text" class="form-control" id="datepicker"></label>                              
                              
                        </div>
                        

                        
                    </fieldset>
                </form>


              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-success" onclick="addToDb()" >Guardar</button>
                
              </div>
            </div>

          </div>
        </div>



        <img src="./img/map.png" width="385" height="603" alt="Teeth" usemap="#dentalmap">

        <map name="dentalmap">
        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Superior 1" name="Molar Superior 1"  numDiente="1" coords="46,256,15">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Superior 2" name="Molar Superior 2 " numDiente="2" coords="50,214,15">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Superior 3" name="Molar Superior 3" numDiente="3" coords="58,168,15">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Premolar Superior 1" name="Premolar Superior 1" numDiente="4" coords="72,132,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Premolar Superior 2" name="Premolar Superior 2" numDiente="5" coords="87,101,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Canino Superior 1" name="Canino Superior 1" numDiente="6" coords="101,70,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Incisivo Superior 1" name="Incisivo Superior 1" numDiente="7" coords="130,50,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Incisivo Superior 2" name="Incisivo Superior 2" numDiente="8" coords="170,40,15">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Incisivo Superior 3" name="Incisivo Superior 3" numDiente="9" coords="215,40,15">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Incisivo Superior 4" name="Incisivo Superior 4" numDiente="10" coords="256,50,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Canino Superior 2" name="Canino Superior 2" numDiente="11" coords="285,70,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Premolar Superior 3" name="Premolar Superior 3" numDiente="12" coords="300,102,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Premolar Superior 4" name="Premolar Superior 4" numDiente="13" coords="310,132,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Superior 4" name="Molar Superior 4" numDiente="14" coords="327,170,15">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Superior 5" name="Molar Superior 5" numDiente="15" coords="335,215,15">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Superior 6" name="Molar Superior 6" numDiente="16" coords="335,256,15">          
        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Inferior 1" name="Molar Inferior 1" numDiente="17" coords="60,375,12">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Inferior 2" name="Molar Inferior 2" numDiente="18" coords="72,410,12">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Inferior 3" name="Molar Inferior 3" numDiente="19" coords="84,450,15">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Premolar Inferior 1" name="Premolar Inferior 1" numDiente="20" coords="95,490,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Premolar Inferior 2" name="Premolar Inferior 2" numDiente="21" coords="105,517,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Canino Inferior 1" name="Canino Inferior 1" numDiente="22" coords="123,545,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Incisivo Inferior 1" name="Incisivo Inferior 1" numDiente="23" coords="153,560,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Incisivo Inferior 2" name="Incisivo Inferior 2" numDiente="24" coords="180,571,8">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Incisivo Inferior 3" name="Incisivo Inferior 3" numDiente="25" coords="203,40,8">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Incisivo Inferior 4" name="Incisivo Inferior 4" numDiente="26" coords="230,560,8">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Canino Inferior 2" name="Canino Inferior 2" numDiente="27" coords="260,545,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Premolar Inferior 3" name="Premolar Inferior 3" numDiente="28" coords="275,517,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Premolar Inferior 4" name="Premolar Inferior 4" numDiente="29" coords="285,490,10">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Inferior 4" name="Molar Inferior 4" numDiente="30" coords="300,450,15">        
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Inferior 5" name="Molar Inferior 5" numDiente="31" coords="312,410,12">          
            <area shape="circle" onclick="toggleModal(this)" data-toggle="tooltip" title="Molar Inferior 6" name="Molar Inferior 6" numDiente="32" coords="330,375,12">        
          </map>     

      </div>
    </section>

    <!-- Imagen inferior -->
    <section class="py-5 bg-image-full" style="background-image: url('./img/botton.jpg');">
      <div style="height: 200px;"></div>
    </section>

    <!-- Parte inferior -->
    <footer class="py-5 bg-dark">
      <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; DentalCo 2018</p>
      </div>
    </footer>



    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script>

      var diente;
      var tratamiento = '';

      $( function() {
        $( "#datepicker" ).datepicker();
      } );
      

      $(document).ready(
        function(){
          $('[data-toggle="tooltip"]').tooltip(); 
        }

        
      );

      function toggleModal(element){
        var title = element.getAttribute('name');
        diente = element.getAttribute('numDiente');
        ConsultarTratamiento();
        $("#TXttratamiento").val(tratamiento);
        $("#modalTitle").text(title);
        $('#dataInsert').modal('show');
      }

      function addToDb(){
          
      trabajo = {
        Tratamiento: $("#TXttratamiento").val(),
        IdDiente: diente,//$("#TxtNombre").val(),
        IdProtesis: '1',//$("#TxtApellido1").val(),
        IdExpediente: '1',//$("#TxtApellido2").val(),
      }
      $.ajax({
        url: "funciones.php",
        type: "POST",
        //Metodo es una forma de interactuar con el servidor
        data: {Metodo:"AgregarTrabajo", Objeto: JSON.stringify(trabajo)},
        dataType: "JSON",
        success: function(d){
          alert("Guardado exitosamente!");
        },
        error: function(e){
          
          console.log(e);
        }
      })
    
          $('#dataInsert').modal('hide');
          
      }

      function ConsultarTratamiento(){
        obj = {
        
        IdDiente: diente,//$("#TxtNombre").val(),
 
      }
          $.ajax({
            url: "funciones.php",
            type: "POST",
            data: {Metodo:"MtoTratamiento", Objeto: JSON.stringify(obj)},
            dataType: "JSON",
            //d representa lo que manda el servidor.
            success: function(d){
              //$("#Respuesta").html("<h>" +d+ "</h>");
              tratamiento = d;
            },
            error: function(e){
              tratamiento = '';
            }
          })
        }


    </script>

  </body>

</html>
