<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">


    <title>Agregar paciente</title>
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/full-width-pics.css" rel="stylesheet">
    
    

  </head>

  <body>

    <!-- Barra superior -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="main.html">DentalCo</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">

            <li class="nav-item">
              <a class="nav-link" href="main.html">Inicio</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="lobby_paciente">Pacientes
                <span class="sr-only">(current)</span>
              </a>
            </li>            

            <li class="nav-item">
              <a class="nav-link" href="index.html">Cerrar sesión</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Imagen superior -->
    <header class="py-5 bg-image-full" style="background-image: url('./img/top.jpg');">
    </header>

    <!-- Form para el Paciente -->
    <div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="well well-sm">
                    <fieldset>
                        <legend class="text header">Información del Paciente</legend>

                        <div class="form-group">
                            <div class="col-md-8">
                                <input id="TxtCedula" name="id" type="text" placeholder="Cédula de Identificación" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-8">
                                <input id="TxtNombre" name="name" type="text" placeholder="Nombre" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-8">
                                <input id="TxtApellido1" name="lastname1" type="text" placeholder="Primer Apellido" class="form-control">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-8">
                                <input id="TxtApellido2" name="lastname2" type="text" placeholder="Segundo Apellido" class="form-control">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-8">
                                <input id="TxtFechaNacimiento" name="birthdate" type="text" placeholder="Fecha de Nacimiento (YYYYMMDD)" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-8">
                                <input id="TxtFechaIngresado" name="firstday" type="text" placeholder="Fecha Ingresado (YYYYMMDD)" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-8">
                                <input id="TxtTelefono" name="telephone" type="text" placeholder="Número de Teléfono" class="form-control">
                              </br>
                                <select class="combobox" id="tipotelefono" style="width:100px;">
                                  <option value="1">Personal</option>
                                  <option value="2">Trabajo</option>
                                  <option value="3">Hogar</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-8">
                                <input id="TxtCorreo" name="name" type="text" placeholder="Correo Electrónico" class="form-control">
                              </br>
                                <select class="combobox" id="tipocorreo" style="width:100px;">
                                  <option value="1">Personal</option>
                                  <option value="2">Trabajo</option>
                                  <option value="3">Hogar</option>  
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-12 text">
                                <button type="button" class="btn btn-primary btn-lg" id="BtnAgregarPer">Agregar</button>
                            </div>
                        </div>
                    </fieldset>
            </div>
        </div>
    </div>
</div>
            
    <!-- Imagen inferior -->
    <section class="py-5 bg-image-full" style="background-image: url('./img/botton.jpg');">      
      <div style="height: 200px;"></div>
    </section>

    <!-- Parte inferior -->
    <footer class="py-5 bg-dark">
      <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; DentalCo 2018</p>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script>

    //Este metodo agrega Persona
    function AgregarPersona(){
      persona = {
        IdPersona: $("#TxtCedula").val(),
        Nombre: $("#TxtNombre").val(),
        Apellido1: $("#TxtApellido1").val(),
        Apellido2: $("#TxtApellido2").val(),
        FechaNacimiento: $("#TxtFechaNacimiento").val(),
      }
      $.ajax({
        url: "funciones.php",
        type: "POST",
        //Metodo es una forma de interactuar con el servidor
        data: {Metodo:"MtoAgregar", Objeto: JSON.stringify(persona)},
        dataType: "JSON",
        success: function(d){
          alert("Guardado exitosamente la Persona");
        },
        error: function(e){
          console.log(e);
        }
      })
    }

    //Este metodo agrega Paciente/Cliente
    function AgregarCliente(){
      cliente = {
        FechaIngresado: $("#TxtFechaIngresado").val(),
        Activo: true,
        IdPersona: $("#TxtCedula").val()
      }
      $.ajax({
        url: "funciones.php",
        type: "POST",
        //Metodo es una forma de interactuar con el servidor
        data: {Metodo:"MtoAgregar", Objeto: JSON.stringify(cliente)},
        dataType: "JSON",
        success: function(d){
          alert("Guardado exitosamente como Paciente");
        },
        error: function(e){

          console.log(e);
        }
      })
    }

    //Este metodo agrega Telefono
    function AgregarTelefono(){
      telefono = {
        IdTelefono: $("#TxtTelefono").val(),
        FechaIngresado: $("#TxtFechaIngresado").val(),
        Activo: true,
        IdPersona: $("#TxtCedula").val(),
        IdTipoTelefono: $("#tipotelefono").val()
      }
      $.ajax({
      url: "funciones.php",
      type: "POST",
      //Metodo es una forma de interactuar con el servidor
      data: {Metodo:"MtoAgregar", Objeto: JSON.stringify(telefono)},
      dataType: "JSON",
      success: function(d){
        alert("Guardado exitosamente el Telefono");
      },
      error: function(e){
        console.log(e);
      }
      }) 
    }

    //Este metodo agrega Correo
    function AgregarCorreo(){
      correo = {
        IdCorreo: $("#TxtCorreo").val(),
        FechaIngresado: $("#TxtFechaIngresado").val(),
        Activo: true,
        IdPersona: $("#TxtCedula").val(),
        IdTipoCorreo: $("#tipocorreo").val()
      }
      $.ajax({
      url: "funciones.php",
      type: "POST",
      //Metodo es una forma de interactuar con el servidor
      data: {Metodo:"MtoAgregar", Objeto: JSON.stringify(correo)},
      dataType: "JSON",
      success: function(d){
        alert("Guardado exitosamente el Telefono");
      },
      error: function(e){
        console.log(e);
      }
      }) 
    }

    $(document).ready(function(){
      $('#BtnAgregarPer').click(function(){
        AgregarPersona();
        AgregarCliente();
        AgregarTelefono();
        AgregarCorreo();
      });
    })

  </script>

  </body>

</html>
